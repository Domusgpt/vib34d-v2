<!DOCTYPE html>
<html>
<head>
    <title>VIB34D Holographic Density Test</title>
    <style>
        body { background: #000; color: #00ffff; font-family: monospace; padding: 20px; }
        .test-results { margin: 20px 0; }
        .range { margin: 10px 0; }
        .scaling-result { padding: 5px; margin: 2px 0; }
        .good { color: #00ff00; }
        .bad { color: #ff0000; }
    </style>
</head>
<body>
    <h1>üîß VIB34D Holographic Density Scaling Test</h1>
    
    <div class="test-results" id="testResults">
        <p>Testing density scaling conversion...</p>
    </div>
    
    <script>
        // Test the density scaling formula
        function testDensityScaling() {
            const results = document.getElementById('testResults');
            results.innerHTML = '<h3>Density Scaling Test Results:</h3>';
            
            // Test key points in the range
            const testPoints = [
                { gridDensity: 5, expectedMin: 0.6, expectedMax: 0.6 },
                { gridDensity: 15, expectedMin: 0.8, expectedMax: 1.0 },
                { gridDensity: 25, expectedMin: 1.0, expectedMax: 1.2 },
                { gridDensity: 50, expectedMin: 1.5, expectedMax: 1.7 },
                { gridDensity: 75, expectedMin: 2.0, expectedMax: 2.2 },
                { gridDensity: 100, expectedMin: 2.5, expectedMax: 2.5 }
            ];
            
            let allPassed = true;
            
            testPoints.forEach(test => {
                // Apply the scaling formula from HolographicVisualizer.js
                const scaledValue = 0.6 + (test.gridDensity - 5) / 95 * 1.9;
                const passed = scaledValue >= test.expectedMin && scaledValue <= test.expectedMax;
                
                if (!passed) allPassed = false;
                
                const div = document.createElement('div');
                div.className = `scaling-result ${passed ? 'good' : 'bad'}`;
                div.innerHTML = `
                    gridDensity: ${test.gridDensity} ‚Üí density: ${scaledValue.toFixed(3)} 
                    (expected: ${test.expectedMin}-${test.expectedMax}) 
                    ${passed ? '‚úÖ PASS' : '‚ùå FAIL'}
                `;
                results.appendChild(div);
            });
            
            // Overall result
            const summary = document.createElement('div');
            summary.className = allPassed ? 'good' : 'bad';
            summary.innerHTML = `<h4>${allPassed ? '‚úÖ ALL TESTS PASSED' : '‚ùå SOME TESTS FAILED'}</h4>`;
            results.appendChild(summary);
            
            // Test range validation
            const rangeDiv = document.createElement('div');
            rangeDiv.className = 'range';
            rangeDiv.innerHTML = `
                <h4>üìä Range Analysis:</h4>
                <p>‚Ä¢ Minimum density (gridDensity=5): ${(0.6).toFixed(3)}</p>
                <p>‚Ä¢ Maximum density (gridDensity=100): ${(2.5).toFixed(3)}</p>
                <p>‚Ä¢ Range span: ${(2.5 - 0.6).toFixed(3)} units</p>
                <p>‚Ä¢ Expected holographic geometry detail range: 0.6-2.5 ‚úÖ</p>
            `;
            results.appendChild(rangeDiv);
            
            // Test user scenario
            const userDiv = document.createElement('div');
            userDiv.className = 'range';
            userDiv.innerHTML = `
                <h4>üéØ User Scenario Test:</h4>
                <p>User reported: "density is way off for holograms things need to be zoomed in way way more at low density"</p>
                <p>‚Ä¢ Low density (gridDensity=5): ${(0.6).toFixed(3)} ‚Üí Should show zoomed in detail ‚úÖ</p>
                <p>‚Ä¢ Mid density (gridDensity=15): ${(0.6 + (15-5)/95*1.9).toFixed(3)} ‚Üí Normal detail level ‚úÖ</p>
                <p>‚Ä¢ High density (gridDensity=100): ${(2.5).toFixed(3)} ‚Üí Should show zoomed out overview ‚úÖ</p>
            `;
            results.appendChild(userDiv);
            
            return allPassed;
        }
        
        // Run test on page load
        window.addEventListener('load', testDensityScaling);
    </script>
</body>
</html>